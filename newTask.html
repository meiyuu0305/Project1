<!-- file for form to add new task -->

<!DOCTYPE html>

<html id="taskForm">
    <body>
        <header>
            <nav class="menu">
                <p>Person 1's Task Management</p>
                <div id="animatation"></div>
                <div class="menuitems">
                    <ul>
                        <li><a href="frontpage.html">Team Java</a></li>
                        <li><a href="person1.html">Person 1</a></li>
                        <li><a href="newPerson.html">Add New Team Member</a></li>
                        <li><a href="newTask.html">Add New Task</a></li>
                    </ul>
                </div>
            </nav>
        </header>
        <form id="taskForm" method="post">
            <fieldset>
                <legend>Add New Task:</legend>
                <p>
                    <label for="f-task">Task: </label>
                    <input type="text" name="task" id="f-task" placeholder="Enter task name here..."/>
                </p>
                <p>
                    <label for="f-dueDate">Due Date: </label>
                    <input type="date" name="duedate" id="f-dueDate"/>
                </p>
                <p>
                    <label for="f-teamMember">Assigned Team Member: </label>
                    <input type="text" name="assignedMember" id="f-teamMember" placeholder="First and last name"/>
                </p>
                <input type="reset" />
                <input type="submit" />
            </fieldset>
        </form>
        <p id="taskJSONResult">Task Information</p>
        <!--<script src="newTask.js"></script> -->
        <script>
            const taskJSONText = document.getElementById("taskJSONResult");
            taskJSONText.innerHTML = localStorage.getItem("JSONInfoTask");
            const formTask = document.querySelector("#taskForm");
            formTask.addEventListener("submit", function (e) {
                let ftask = document.querySelector("#f-task").value;
                if(ftask==null || ftask=="") {
                    alert("Enter a task to be assigned");
                 e.preventDefault();
                   return;
                }
                let fdate = document.querySelector("#f-dueDate").value;
                if(fdate==null) {
                    alert("Select a due date");
                    e.preventDefault();
                    return;
                }
                let fteamMember = document.querySelector("f-teamMember").value;
                if(fteamMember==null || fteamMember=="") {
                    alert("Assign this task to a team member");
                    e.preventDefault();
                    return;
                }

                const taskInfo = {Task:ftask, DueDate:fdate, TeamMember:fteamMember};
                let taskTextJSON = JSON.stringify(taskInfo);
                localStorage.setItem("JSONInfoTask", taskTextJSON);
            });
        </script>
    </body>
</html>
